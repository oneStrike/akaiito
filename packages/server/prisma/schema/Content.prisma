/// 中间表，联合内容和分类
model ContentCategories {
  contentId  Int       @map("content_id") /// 内容id
  categoryId Int       @map("category_id") /// 分类id
  createdAt  DateTime  @default(now()) @map("created_at") @db.DateTime(0)
  updatedAt  DateTime? @updatedAt @map("updated_at") @db.DateTime(0)
  Content    Content   @relation(fields: [contentId], references: [id])

  @@id([contentId, categoryId])
  @@map("content_categorie")
}

/// 内容
model Content {
  id          Int                 @id @default(autoincrement()) /// 主键id
  name        String              @unique(map: "name") @db.VarChar(50) /// 内容名称
  cover       String?             @db.VarChar(50) /// 内容封面
  description String              @db.VarChar(255) /// 内容描述信息
  createdAt   DateTime            @default(now()) @map("created_at") @db.DateTime(0)
  updatedAt   DateTime?           @updatedAt @map("updated_at") @db.DateTime(0)
  categories  ContentCategories[]
  Category    Category?           @relation(fields: [categoryId], references: [id])
  categoryId  Int?
  Author      Author?             @relation(fields: [authorId], references: [id])
  authorId    Int?

  @@map("content")
}

/// 分类
model Category {
  id          Int       @id @default(autoincrement()) /// 主键id
  name        String    @unique(map: "name") @db.VarChar(50) /// 分类名称
  icon        String?   @db.VarChar(50) /// 分类图标
  contentType Int?      @default(0) @map("content_type") @db.TinyInt /// 分类对应的内容类型 1==>小说 2==>漫画 3==>图片 4==>视频
  status      Int?      @default(0) @db.TinyInt /// 状态 1：正常 0：禁用
  description String    @db.VarChar(255) /// 分类描述
  createdAt   DateTime  @default(now()) @map("created_at") @db.DateTime(0)
  updatedAt   DateTime? @updatedAt @map("updated_at") @db.DateTime(0)
  contents    Content[]

  @@map("categorie")
}

/// 作者
model Author {
  id          Int       @id @default(autoincrement()) /// 主键id
  name        String    @unique(map: "name") @db.VarChar(50) /// 作者名称
  avatar      String?   @db.VarChar(255) /// 作者头像
  description String?   @db.VarChar(255) /// 作者描述
  status      Int?      @default(1) @db.TinyInt /// 状态 1：正常 0：禁用
  website     String?   @db.VarChar(255) /// 作者主页
  contentType Int       @default(0) @map("content_type") @db.TinyInt /// 作者内容类型 1==>小说 2==>漫画 3==>图片 4==>视频
  createdAt   DateTime  @default(now()) @map("created_at") @db.DateTime(0)
  updatedAt   DateTime? @updatedAt @map("updated_at") @db.DateTime(0)
  contents    Content[]

  @@map("author")
}
