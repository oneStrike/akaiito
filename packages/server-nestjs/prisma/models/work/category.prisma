model WorkCategory {
  /// 主键ID
  id                 Int      @id @default(autoincrement())
  /// 分类名称（唯一）
  name               String   @unique @db.VarChar(20)
  /// 分类图标URL
  icon               String?  @db.VarChar(255)
  /// 人气值（用于展示和排序）
  popularity         Int      @default(0)
  /// 调整后的人气权重
  adjustedPopularity Int      @default(0) @map("adjusted_popularity") @db.Integer
  /// 排序值（数值越小越靠前）
  order              Int      @default(0) @db.SmallInt
  /// 小说数量（由物化视图或触发器维护）
  novelCount         Int      @default(0) @map("novel_count") @db.Integer
  /// 漫画数量
  comicCount         Int      @default(0) @map("manga_count") @db.Integer
  /// 图集数量
  photoCount         Int      @default(0) @map("photo_count") @db.Integer
  /// 插画作品数量
  illustrationCount  Int      @default(0) @map("illustration_count") @db.Integer
  /// 是否启用
  isEnabled          Boolean  @default(true)
  /// 应用范围（bitmask：1=图集, 2=小说, 4=漫画, 8=插画）
  applicableTypes    Int      @default(0) @map("applicable_types") @db.SmallInt
  /// 创建时间
  createdAt          DateTime @default(now()) @map("created_at") @db.Timestamptz
  /// 更新时间
  updatedAt          DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // 关联关系
  comics WorkComic[]

  /// 索引优化
  @@index([applicableTypes, isEnabled]) // 更高效过滤组合条件
  @@index([order])
  @@index([novelCount, comicCount]) // 支持内容量筛选
  @@index([name]) // 支持快速查找分类名
  @@map("work_category")
}
